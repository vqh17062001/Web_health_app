@inherits LayoutComponentBase
@using Microsoft.AspNetCore.Components.Authorization

<div class="page">
    <div class="sidebar">
        <NavMenu />
    </div>

    <main>
        <div class="top-row px-4">
            <AuthorizeView>
                <Authorized>
                    <div class="user-profile-section">
                        <!-- User Info Display with Dropdown -->
                        <div class="account-dropdown">
                            <div class="user-info-display dropdown-toggle" type="button" data-bs-toggle="dropdown"
                                aria-expanded="false">
                                <div class="user-avatar">
                                    <div class="avatar-circle">
                                        <i class="fas fa-user"></i>
                                    </div>
                                    <div class="online-indicator"></div>
                                </div>
                                <div class="user-details">
                                    <span class="user-fullname">@context.User.FindFirst("fullname")?.Value</span>
                                    <span class="user-role">@context.User.Identity.Name</span>
                                </div>
                                <div class="dropdown-arrow">
                                    <i class="fas fa-chevron-down"></i>
                                </div>
                            </div>
                            <ul class="dropdown-menu dropdown-menu-end">
                                @* <li class="dropdown-header">
                                    <div class="dropdown-user-info">
                                        <div class="dropdown-avatar">
                                            <i class="fas fa-user"></i>
                                        </div>
                                        <div class="dropdown-details">
                                            <strong>@context.User.FindFirst("fullname")?.Value</strong>
                                            <small>@context.User.Identity.Name</small>
                                        </div>
                                    </div>
                                </li>
                                <li>
                                    <hr class="dropdown-divider">
                                </li> *@
                                <li>
                                    <a class="dropdown-item" href="/profile">
                                        <i class="fas fa-user-circle"></i>
                                        <span>Thông tin cá nhân</span>
                                    </a>
                                </li>
                                <li>
                                    <a class="dropdown-item"
                                       href="/changepassword?UserName=@context.User.Identity.Name">
                                        <i class="fas fa-key"></i>
                                        <span>Đổi mật khẩu</span>
                                    </a>
                                </li>
                                @* <li>
                                    <a class="dropdown-item" href="/settings">
                                        <i class="fas fa-cog"></i>
                                        <span>Cài đặt</span>
                                    </a>
                                </li>
                                <li>
                                    <a class="dropdown-item" href="/notifications">
                                        <i class="fas fa-bell"></i>
                                        <span>Thông báo</span>
                                    </a>
                                </li> *@
                                <li>
                                    <hr class="dropdown-divider">
                                </li>
                                @* <li>
                                    <a class="dropdown-item" href="/help">
                                        <i class="fas fa-question-circle"></i>
                                        <span>Trợ giúp</span>
                                    </a>
                                </li> *@
                                <li>
                                    <a class="dropdown-item logout-item" href="/logout">
                                        <i class="fas fa-sign-out-alt"></i>
                                        <span>Đăng xuất</span>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </Authorized>
                <NotAuthorized>
                    <div class="login-section">
                        <NavLink href="/login" class="login-link">
                            <i class="fas fa-sign-in-alt"></i>
                            <span>Đăng nhập</span>
                        </NavLink>
                    </div>
                </NotAuthorized>
            </AuthorizeView>
        </div>

        <article class="content px-4">
            @Body
        </article>
    </main>
</div>

<div id="blazor-error-ui">
    An unhandled error has occurred.
    <a href="" class="reload">Reload</a>
    <a class="dismiss">🗙</a>
</div>
